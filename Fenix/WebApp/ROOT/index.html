<html>
<head>
    <title>PROVA</title>
    <script src='assets/cytoscape.js'></script>
    <script src='assets/jquery-3.3.1.js'></script>
    <script src='elems.js'></script>
</head>

<style>
    #cy {
        
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
    }
</style>

<body>
    <div id="cy"></div>  

    <script>
        
    var cy = cytoscape({
        container: document.getElementById('cy'),
        elements:Elems,
        style: [
        {
            selector: 'node[type = "concept"]',
            style: {
                'label': 'data(id)',
                'width': '200px',
                'height': '200px',
                'color': 'black',
                'font-size': '26px',
                'text-halign': 'top',
                'text-valign': 'center',
                'background-opacity': 0,
                'background-image': 'data(image)',
                'background-fit': 'contain',
                'background-clip': 'none'
            }
        },
        {
            selector: 'node[type = "role"]',
            style: {
                'label': 'data(id)',
                'width': '200px',
                'height': '200px',
                'color': 'black',
                'font-size': '26px',
                'text-halign': 'top',
                'text-valign': 'center',
                'background-opacity': 0,
                'background-image': 'data(image)',
                'background-fit': 'contain',
                'background-clip': 'none'
            }
        },
        {
            selector: 'node[type = "attrib"]',
            style: {
                'label': 'data(id)',
                'width': '60px',
                'height': '60px',
                'color': 'black',
                'font-size': '26px',
                'text-halign': 'bottom',
                'text-valign': 'bottom',
                'background-opacity': 0,
                'background-image': 'data(image)',
                'background-fit': 'contain',
                'background-clip': 'none'
            }
        },
        {
            selector: 'node[type = "exists"]',
            style: {
                'label': 'data(type)',
                'width': '50px',
                'height': '50px',
                'color': 'black',
                'font-size': '26px',
                'text-halign': 'top',
                'text-valign': 'top',
                'background-image': 'data(image)',
                'background-fit': 'contain',
                'background-clip': 'none'
            }
        },
        {
            selector:'edge[type = "Opt_Att_s"]',
            style: {
                'curve-style': 'bezier',
                'width': '4px',
                'line-color':'black',
                'source-arrow-shape': 'triangle',
                'source-arrow-color': 'black',
                'control-point-step-size': '140px'
            }
        },
        {
                selector:'edge[type = "Opt_Att_t"]',
                style: {
                'curve-style': 'bezier',
                'text-background-color': 'yellow',
                'text-background-opacity': 1,
                'width': '6px',
                'line-color':'black',
                'line-style':'dashed',
                'source-arrow-shape': 'diamond',
                'source-arrow-color': 'black',
                'control-point-step-size': '140px'
            }

        }
        ]
    });
    cy.layout({
        name: 'cose',//cose è piu bello e non richiede focus ma breadthfirst è più ordinato
        fit: false,
        columns: 1,
        rows:2,
        avoidOverlap: true,
        avoidOverlapPadding: 80,
    }).run();         
    function focus(target) {
        cy.animate({
          fit: {
            eles: target,
            padding: 210
         },
          duration: 700,
          //easing: 'ease',
          queue: true
        });
    }
    //var startNode = cy.$('node[id = "Persona"]'); //graph.$(selector)
    //startNode.select();
    //focus(startNode);
    
    </script>
</body>
</html>




